<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07 / The Conductor - System Architecture</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        /* Tech-07 Specific Styles (Control Center Theme) */
        body {
            background-color: #050505;
            color: #d4d4d4;
        }

        .tech-container {
            max-width: 1000px;
            /* Wider layout for architecture diagrams */
            margin: 0 auto;
            padding: 80px 20px;
        }

        .tech-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .tech-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -0.05em;
        }

        .tech-subtitle {
            font-family: 'Noto Sans TC', sans-serif;
            color: #888;
            font-size: 1.2rem;
            font-weight: 300;
        }

        .section-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
            display: block;
            border-left: 2px solid #333;
            padding-left: 10px;
        }

        /* A. Agent Registry (CSS Grid) */
        .agent-registry {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 60px;
        }

        .agent-card {
            display: grid;
            grid-template-columns: 1.5fr 3fr 2fr;
            align-items: center;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid #333;
            padding: 20px;
            border-radius: 4px;
            transition: all 0.2s ease;
            text-decoration: none;
            color: inherit;
        }

        .agent-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: #fff;
            transform: translateX(5px);
        }

        .agent-id {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: #fff;
            font-size: 1.1rem;
        }

        .agent-role {
            font-family: 'Noto Sans TC', sans-serif;
            color: #ccc;
        }

        .agent-tools {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #666;
            text-align: right;
        }

        /* B. Pipeline Visualization (Vertical Timeline) */
        .pipeline-container {
            position: relative;
            padding: 20px 0;
            margin-bottom: 60px;
        }

        .pipeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #333;
            transform: translateX(-50%);
        }

        .pipeline-node {
            position: relative;
            margin-bottom: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .node-circle {
            width: 40px;
            height: 40px;
            background: #000;
            border: 2px solid #fff;
            border-radius: 50%;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            color: #fff;
            font-size: 0.9rem;
        }

        .node-label {
            position: absolute;
            left: 55%;
            top: 50%;
            transform: translateY(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #888;
            padding-left: 20px;
            white-space: nowrap;
        }

        /* Special Node: Human Checkpoint */
        .human-node .node-circle {
            border-color: #ffbd2e;
            color: #ffbd2e;
            width: 30px;
            height: 30px;
            font-size: 0.8rem;
        }

        .human-node .node-label {
            color: #ffbd2e;
        }

        /* C. Orchestrator Logic & MCP Protocol */
        .logic-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: start;
        }

        .code-window {
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #ccc;
            overflow-x: auto;
        }

        .code-header {
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            margin-bottom: 10px;
            display: flex;
            gap: 5px;
            color: #666;
        }

        .traffic-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .red {
            background: #ff5f56;
        }

        .yellow {
            background: #ffbd2e;
        }

        .green {
            background: #27c93f;
        }

        .keyword {
            color: #c678dd;
        }

        .function {
            color: #61afef;
        }

        .string {
            color: #98c379;
        }

        .comment {
            color: #666;
            font-style: italic;
        }

        .mcp-box {
            border: 1px solid #333;
            padding: 20px;
            background: rgba(255, 255, 255, 0.02);
        }

        .mcp-title {
            font-family: 'JetBrains Mono', monospace;
            color: #666;
            margin-bottom: 10px;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .narrative-box {
            margin-top: 50px;
            font-family: 'Noto Sans TC', sans-serif;
            line-height: 1.8;
            color: #ccc;
            text-align: center;
        }

        .back-btn {
            display: block;
            margin: 60px auto 0;
            font-family: 'JetBrains Mono', monospace;
            color: #666;
            text-decoration: none;
            width: fit-content;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            color: #fff;
            border-bottom-color: #fff;
        }

        @media (max-width: 768px) {
            .agent-card {
                grid-template-columns: 1fr;
                gap: 5px;
            }

            .agent-tools {
                text-align: left;
            }

            .logic-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <main class="tech-container">

        <header class="tech-header">
            <div class="tech-title">07 / THE CONDUCTOR</div>
            <div class="tech-subtitle">Agent Orchestration & Human-in-the-Loop</div>
        </header>

        <!-- A. Agent Registry -->
        <section>
            <span class="section-label">SYSTEM MODULES (AGENT REGISTRY)</span>
            <div class="agent-registry">
                <a href="tech-01.html" class="agent-card">
                    <div class="agent-id">01 VERBATIM</div>
                    <div class="agent-role">Fidelity & Structure</div>
                    <div class="agent-tools">ffmpeg, whisper, merge</div>
                </a>
                <a href="tech-02.html" class="agent-card">
                    <div class="agent-id">02 DECODER</div>
                    <div class="agent-role">Cultural Translation</div>
                    <div class="agent-tools">gemini-pro (low temp)</div>
                </a>
                <a href="tech-03.html" class="agent-card">
                    <div class="agent-id">03 DISTILLER</div>
                    <div class="agent-role">Essence Extraction</div>
                    <div class="agent-tools">grandma_test.py</div>
                </a>
                <a href="tech-04.html" class="agent-card">
                    <div class="agent-id">04 AMPLIFIER</div>
                    <div class="agent-role">Contextual Resonance</div>
                    <div class="agent-tools">context_injection.json</div>
                </a>
                <a href="tech-05.html" class="agent-card">
                    <div class="agent-id">05 RETENTION</div>
                    <div class="agent-role">Networked Memory</div>
                    <div class="agent-tools">Io_loop_strategy</div>
                </a>
                <a href="tech-06.html" class="agent-card">
                    <div class="agent-id">06 CURATOR</div>
                    <div class="agent-role">Multimodal Indexing</div>
                    <div class="agent-tools">scenedetect, imagehash</div>
                </a>
            </div>
        </section>

        <!-- B. Pipeline Visualization -->
        <section>
            <span class="section-label">PRODUCTION PIPELINE</span>
            <div class="pipeline-container">
                <div class="pipeline-line"></div>

                <div class="pipeline-node">
                    <div class="node-circle">01</div>
                    <div class="node-label">RAW FOOTAGE INGESTION</div>
                </div>

                <div class="pipeline-node">
                    <div class="node-circle">02</div>
                    <div class="node-label">CULTURAL DECODING</div>
                </div>

                <!-- Human Checkpoint -->
                <div class="pipeline-node human-node">
                    <div class="node-circle">✓</div>
                    <div class="node-label">HUMAN QA: TRANSLATION CHECK</div>
                </div>

                <div class="pipeline-node">
                    <div class="node-circle">03</div>
                    <div class="node-label">ESSENCE DISTILLATION</div>
                </div>

                <div class="pipeline-node">
                    <div class="node-circle">04</div>
                    <div class="node-label">CONTEXT AMPLIFICATION</div>
                </div>

                <!-- Human Checkpoint -->
                <div class="pipeline-node human-node">
                    <div class="node-circle">✓</div>
                    <div class="node-label">HUMAN QA: ANALOGY FIT</div>
                </div>

                <div class="pipeline-node">
                    <div class="node-circle">06</div>
                    <div class="node-label">ASSET GENERATION & FINAL BUILD</div>
                </div>

            </div>
        </section>

        <!-- C. Logic & MCP -->
        <section>
            <span class="section-label">ORCHESTRATOR LOGIC</span>
            <div class="logic-grid">

                <!-- Python Logic -->
                <div class="code-window">
                    <div class="code-header">
                        <div class="traffic-light red"></div>
                        <div class="traffic-light yellow"></div>
                        <div class="traffic-light green"></div>
                        <span style="margin-left:10px;">conductor.py</span>
                    </div>
                    <div class="code-content">
                        <span class="keyword">def</span> <span class="function">run_pipeline</span>(video_source):<br>
                        &nbsp;&nbsp;<span class="comment"># 1. Structure Preservation</span><br>
                        &nbsp;&nbsp;transcript = agent_01.<span class="function">run</span>(video_source)<br>
                        <br>
                        &nbsp;&nbsp;<span class="comment"># 2. Cultural Decoding + Human QA</span><br>
                        &nbsp;&nbsp;zh_text = agent_02.<span class="function">run</span>(transcript)<br>
                        &nbsp;&nbsp;<span class="keyword">if not</span> human.<span
                            class="function">review</span>(zh_text): <span class="keyword">return</span> <span
                            class="string">"REFINE"</span><br>
                        <br>
                        &nbsp;&nbsp;<span class="comment"># 3. Amplification (Injection)</span><br>
                        &nbsp;&nbsp;context = <span class="function">load_schema</span>(<span
                            class="string">"Architecture"</span>)<br>
                        &nbsp;&nbsp;notes = agent_04.<span class="function">run</span>(zh_text, context)<br>
                        <br>
                        &nbsp;&nbsp;<span class="keyword">return</span> agent_06.<span
                            class="function">publish</span>(notes)
                    </div>
                </div>

                <!-- MCP Protocol Spec -->
                <div class="mcp-box">
                    <div class="mcp-title">MCP SPEC v1.0</div>
                    <div class="code-content" style="font-size: 0.75rem; line-height: 1.4; color: #888;">
                        {<br>
                        &nbsp;&nbsp;"protocol": "MCP-v1",<br>
                        &nbsp;&nbsp;"stage": "04_AMP",<br>
                        &nbsp;&nbsp;"payload": {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;"source_hash": "a1b2...",<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;"context_tags": ["ARCH"],<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;"status": "AWAIT_QA"<br>
                        &nbsp;&nbsp;}<br>
                        }
                    </div>
                    <div style="margin-top:10px; font-size: 0.7rem; color: #555;">
                        Standardized data handoff ensures zero context loss between agents.
                    </div>
                </div>

            </div>
            </div>

            <!-- Analogy Box (New Addition) -->
            <div class="analogy-box"
                style="margin-top: 30px; border: 1px dashed #666; padding: 20px; border-radius: 4px;">
                <div
                    style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: #888; margin-bottom: 10px; text-transform: uppercase;">
                    The Symphony Analogy</div>
                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; font-family: 'Noto Sans TC', sans-serif; font-size: 0.9rem; color: #ccc;">
                    <div>
                        <strong style="color:#fff;">Orchestrator (Code) = 指揮家</strong><br>
                        它決定「誰先誰後」。<br>
                        指揮大提琴何時進場，判斷何時需要人類 (Soloist) 介入獨奏。
                    </div>
                    <div>
                        <strong style="color:#fff;">MCP (Protocol) = 樂譜標準</strong><br>
                        它確保「語言互通」。<br>
                        如果沒有標準樂譜，小提琴手看不懂鋼琴手的筆記，協作就會變成噪音。
                    </div>
                </div>
            </div>

        </section>

        <div class="narrative-box">
            <p><strong>Partnership Protocol</strong><br>
                你不再是操作者，你是指揮家。<br>
                AI 負責處理大規模的繁瑣運算，人類負責在關鍵節點注入靈魂與價值判斷。</p>
        </div>

        <a href="index.html#section-7" class="back-btn">← BACK TO PHYSICS OF INSIGHT</a>

    </main>

</body>

</html>