---
description: SRT 資料合併與逐字稿生成 (Transcript Merging)
---

# /merge - SRT 合併與逐字稿生成

## 📚 規範參考（文件階層）

| 層級         | 文件                   | 用途                         |
| ------------ | ---------------------- | ---------------------------- |
| 🔴 **決策層** | `Agent.md` 第 27-90 行 | 核心鐵律、任務定義、錯誤樣態 |
| 🟢 **執行層** | 本文件 (`merge.md`)    | Agent 自動化工作流程指令     |

> ⚠️ **優先順序**：遇到衝突時，以 `Agent.md` 為準。
> 
> 🛑 **核心鐵律**：零省略原則、嚴格的「整理」定義、專業知識補充必須隨文插入。

---

此工作流程將多個 SRT 字幕檔合併為一份格式化的 Markdown 逐字稿。

## 前置作業

// turbo
1. 閱讀專案規範 `Agent.md` 確認任務一的規範要求：
   ```bash
   cat Agent.md | head -90
   ```

2. 確認目標 SRT 檔案清單：
   - 詢問用戶要合併哪些 SRT 檔案
   - 若未指定，列出當前目錄所有 `.srt` 檔案供用戶選擇

// turbo
3. 檢視 SRT 檔案內容，確認順序：
   ```bash
   ls -la *.srt
   ```

## 執行步驟

4. **讀取所有指定的 SRT 檔案**
   - 按檔案名稱順序或用戶指定順序串接
   - 使用 `view_file` 工具逐一讀取

5. **內容清理 (依據 Agent.md 規範)**
   - 移除 SRT 序號（1, 2, 3...）
   - 移除時間軸（00:00:00,000 --> 00:00:02,500）
   - 移除贅字：`那個`、`呃`、`嗯`、`就`、`那`（發語詞）、`好的`（無意義轉場）
   - ⚠️ 若刪除會影響句意，必須保留

6. **段落重組**
   - 將 SRT 短行合併為通順長段落
   - 每 300-500 字或話題轉換時分段
   - 極少量加入連接詞（如：接著、然後），不得改變原意

7. **插入標題**
   - 根據內文邏輯插入 `##` 或 `###` 標題
   - ⚠️ 標題是「插入」，不能取代原本內文

8. **專業知識補充 (重點)**
   - 提取專業術語進行解釋
   - **必須在首次談到該術語的段落之後**立即插入
   - ⚠️ **嚴禁統一放在文末**
   - 格式：
     ```markdown
     (正文段落)...這就是我們今天要討論的 Transformer 架構。
     
     > **專業知識補充：Transformer**
     > 
     > 現代 LLM 的核心架構，完全依賴注意力機制（Attention）來處理序列數據。
     
     (正文段落)接下來，我們來看看 Transformer 的細節...
     ```
   - 補充區塊上下必須各保留一個空行

9. **輸出檔案**
   - 命名為 `[課程名稱/章節]_完整逐字稿.md`
   - 編碼：UTF-8
   - 使用 `write_to_file` 工具另存新檔

## 最終檢查清單

10. 完成後，逐項確認：
    - [ ] 是否保留了所有教學內容與細節？
    - [ ] 是否移除了時間軸與序號？
    - [ ] 是否移除了「呃、那個」等贅字？
    - [ ] 是否加入了適當的標題？
    - [ ] 是否**沒有**將內容轉寫為摘要或文章體裁？
    - [ ] **是否將專業知識補充插入在文中對應位置，而非文末？**
    - [ ] **補充區塊上下是否都保留了空行？**

## 🛑 禁止行為

- ❌ 摘要化（「講者介紹了...」）
- ❌ 第三人稱描述（「第一部分討論了...」）
- ❌ 省略細節
- ❌ 過度清洗語氣詞
- ❌ 覆寫原始 SRT 檔案

## 回報格式

完成後回報：
```
✅ SRT 合併完成

📁 輸入檔案：[列出合併的 SRT 檔案]
📄 輸出檔案：[輸出的 .md 檔案路徑]
📊 統計：
   - 總段落數：XX
   - 專業術語補充數：XX
   - 預估字數：XXXXX 字

⚠️ 注意事項：[如有需要人工確認的部分]
```
